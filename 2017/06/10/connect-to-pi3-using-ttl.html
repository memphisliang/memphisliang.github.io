<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="/assets/css/style.css">
        <title>使用TTL连接电脑和树莓派</title>
    </head>

    <body>
        <div class="container">
            <div id="header" class="module">
    <div class="header-links">
        [<a href="/">首页</a>]
        [<a href="https://github.com/memphisliang">@Github</a>]
    </div>
</div>


<div id="content" class="module">
    <div class="article">
        <h1 id="使用ttl连接电脑和树莓派">使用TTL连接电脑和树莓派</h1>

<p>本篇文章主要是讲解如何用USB转TTL线来连接电脑和树莓派，为什么要这么麻烦的使用TTL来连接树莓派呢，主要是因为现在主流的是使用网络来连接树莓派，基本上都要使用到路由器等设备，而有时我们不具备这样的条件，更希望可以不通过网络来连接树莓派，使用USB转TTL线就可以达到这个效果，这种方法不需要网络，电脑可以在无网的情况下通过TTL线直连控制树莓派。</p>

<h2 id="需要的材料">需要的材料</h2>

<p>首先，我们需要准备一些软件和工具：</p>

<ul>
  <li>
    <p>putty软件，putty是一个十分出名的远程连接软件，它提供了SSH，Serial串行等多种方式来连接两台电脑，使用用户可以通过命令行界面来控制另一台电脑。</p>
  </li>
  <li>
    <p>一台电脑，笔记本和台式机都可以，就是你想用来与树莓派连接的电脑。</p>
  </li>
  <li>
    <p>一台树莓派3B，我使用的是树莓派3代B型，这个树莓派自带WiFi模块，比以前的树莓派型号更加强大。</p>
  </li>
  <li>
    <p>TTL线对应的驱动，当你购买一条USB转TTL线的时候，商家通常都会提供对应的驱动，直接安装使用即可，或者也可以在网上下载对应驱动也可以。</p>
  </li>
  <li>
    <p>一条USB转TTL线，我使用的是PL2303TA的线，大家买的使用要注意你使用的系统是否支持对应的驱动，不要买回来了才发现用不了，具体那些系统可以使用什么线可以参考下面这个表。</p>
  </li>
</ul>

<p><img src="https://i.loli.net/2018/01/24/5a687fdbaee64.jpg" alt="PL2303驱动系统支持表" title="PL2303驱动系统支持表" /></p>

<h2 id="软硬件设置">软硬件设置</h2>

<p>准备好需要的材料之后，就是具体的安装和使用了，因为在安装过程中经常软件和硬件交叉进行设置的，所以在这里读者只要按照下面的步骤进行设置就好。也说明一下，在这里不会说明如何安装树莓派系统，大家只要上网搜索一下就可以找到很多教程了，所以这里不再说明。</p>

<h3 id="系统设置">系统设置</h3>

<p>我是使用树莓派提供的Serial串行接口来连接树莓派的，使用了UART的接口，但在3代之后的树莓派因为要提供蓝牙功能，所以蓝牙就占用了原先的UART接口，要使用UART接口就必须重新启用UART功能，具体细节可以查看<a href="https://raspberrypi.stackexchange.com/questions/45570/how-do-i-make-serial-work-on-the-raspberry-pi3">stackexchange上的讨论</a>，这个问题的解决方法如下：</p>

<p>把raspbian系统安装到SD卡后，把SD卡用读卡器插入到电脑中，然后打开SD卡。在SD卡的根目录，应该可以看到一个<code class="highlighter-rouge">config.txt</code>文件。</p>

<p><img src="https://i.loli.net/2018/01/24/5a687ff9eb9bd.png" alt="SD卡根目录" title="SD卡根目录" /></p>

<p>打开这个文件（建议大家使用Sublime Text或者Notepad++这些文本编辑器打开文件，如果使用Windows自带的笔记本软件，会因为不识别Linux的换行符而排成一行，非常难看），在文件的最后添加以下代码：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Fix UART
enable_uart=1
</code></pre></div></div>

<p>保存退出之后，就可以把SD卡插到树莓派上了。</p>

<h3 id="ttl线连接树莓派">TTL线连接树莓派</h3>

<p>之后就是把USB转TTL线插到树莓派上了（默认大家已经安装了驱动），在这里为了安全起见，大家先不要把树莓派的电源插上。</p>

<p>大家首先要找到PL2303线上每个引口对应的是什么，例如我的PL2303TA中，红色代表的是+5V，黑色代表GND，白色代表RXD，最后绿色代表TXD，大家可以在商家页面或网上找到自己线材对应的引口图。然后下面给出树莓派3B的GPIO接口图。</p>

<p><img src="https://i.loli.net/2018/01/24/5a68801947c7b.png" alt="树莓派3B-GPIO接口图" title="树莓派3B-GPIO接口图" /></p>

<p>我们可以看到树莓派的Pin4，6，8和10就是我们TTL线要接的四个引口，要注意的是，TTL线的TXD口要接树莓派的RXD口，而TTL线的TXD口接树莓派的RXD口，如果之后发现连接不上，也可以试试反着来接，而5V口和GND口就是对应的，即5V对5V，GND对GND。</p>

<p>我是这样接的，因为大家不一定是用和我一样的PL2303TA，所以大家参考一下就好。</p>

<p><img src="https://i.loli.net/2018/01/24/5a688032af680.jpg" alt="实际连接图" title="实际连接图" /></p>

<p>接好线后，就可以插上电源并把USB线连到电脑上了。</p>

<h3 id="使用putty连接树莓派">使用putty连接树莓派</h3>

<p>在使用putty连接树莓派之前，我们还要知道要使用哪个COM口来连接树莓派，打开Windows的设备管理器，通过 控制面板 - 硬件和声音 - 设备管理器 打开。然后找到端口选项展开，我们可以看到有一个 Prolific USB-to-Serial Comm Port (COM3) 的项目，看到COM3就是我们要找的COM口了，这里我们要使用COM3口来连接树莓派。</p>

<p><img src="https://i.loli.net/2018/01/24/5a6880533c9eb.png" alt="查看COM口" title="查看COM口" /></p>

<p>然后我们打开putty软件，按下图来设置，在Serial line栏填写刚刚找到的COM口，我这里是COM3，然后频率是树莓派默认的115200，选择Serial连接模式，之后打开连接。</p>

<p><img src="https://i.loli.net/2018/01/24/5a68806abc25d.png" alt="putty设置" title="putty设置" /></p>

<p>如果出现login提示，就表示我们成功连上树莓派了，如果是黑屏的话，试试按一下Enter键，看看有没有反应，如果没有在检查一下以上步骤有没有完成，这篇文章到这里就完结了，最后谢谢大家。</p>

<p><img src="https://i.loli.net/2018/01/24/5a68807c59119.png" alt="putty连接成功" title="putty连接成功" /></p>

<!-------------- 链接 ------------------------>


    </div>
</div>

        </div>
    </body>
</html>
